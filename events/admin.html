<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Admin Panel</title>
  <link rel="stylesheet" href="poststyle.css">
</head>
<body>
  <h1 id="main">Admin Approval Panel</h1>
  <hr>
  <section>
    <main id="pending-events" class="event-section">
      <p>Loading pending submissions...</p>
    </main>
  </section>

  <script>
    function loadPending() {
      fetch('/api/events?status=pending')
        .then(res => res.json())
        .then(events => {
          const container = document.getElementById('pending-events');
          container.innerHTML = '';
          if (!events.length) {
            container.innerHTML = "<p>No pending events.</p>";
            return;
          }

          events.forEach(event => {
            const card = document.createElement('div');
            card.classList.add('event-card');
            card.innerHTML = `
              <div class="basics">
                <h2>${event.title}</h2>
                <p><strong>Date:</strong> ${event.date}</p>
                <p><strong>Location:</strong> ${event.location}</p>
              </div>
              <div class="description">
                <p><strong>Description:</strong> ${event.description}</p>
              </div>
              <div class="logistics">
                <p><strong>Attendees:</strong> ${event.maxAttendees}</p>
                <p><strong>Cost:</strong> ${event.cost}</p>
              </div>
              <div class="controls">
                <button onclick="approveEvent(${event.id})">✅ Approve</button>
                <button onclick="rejectEvent(${event.id})">❌ Reject</button>
              </div>
              <hr>
            `;
            container.appendChild(card);
          });
        });
    }

    function approveEvent(id) {
      fetch(`/api/events/${id}/approve, { method: 'POST' }`).then(loadPending);
    }

    function rejectEvent(id) {
      fetch(`/api/events/${id}/reject, { method: 'POST' }`).then(loadPending);
    }

    loadPending();
  </script>
</body>
</html>